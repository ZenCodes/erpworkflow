
<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">


<dom-module id="specification-item-crd">
  <template>
    <style>
      .card{
        @apply(--layout-horizontal);
      }
      paper-input,paper-button,paper-dropdown-menu,paper-item{
        width: 12%;
        /*margin-left: 3%;*/
        font-family: calibri;
        font-size: 16px;
      }
      paper-dropdown-menu{
      margin-left: 2%;
      margin-top: -2%;
      }
      paper-input{
      margin-left: 3%;
      margin-top: -2%;      
      }
      #minmeasure,#maxmeasure,#actualmeasure{
        width: 5%;
        margin-left: -5%;
      }
      #minvalue,#maxvalue{
      margin-left: 1%;
	    width: 5%;
      }
      paper-button{
        text-transform: none;
        text-align: left;
        margin-left: 2%;
      }

    </style>
    <div class="card" hidden$="{{hidediv}}">
      <paper-button id="parameter" value="{{name}}">{{name}}</paper-button>

      <paper-dropdown-menu label="Select" hidden$="{{dropflag}}">
        <paper-listbox class="dropdown-content" on-iron-select="FnSelected">
          <template is="dom-repeat" items="{{itemarr}}" as="item">
          <paper-item>{{item}}</paper-item>
          </template>
        </paper-listbox>
      </paper-dropdown-menu>

      <paper-button id="minvalue" value="{{minvalue}}" hidden$="{{inputflag}}" readonly>{{minvalue}}</paper-button>
      <paper-button readonly hidden$="{{inputflag}}" id="minmeasure" value="{{measure}}">{{measure}}</paper-button>
      <paper-button id="maxvalue" value="{{maxvalue}}" readonly>{{maxvalue}}</paper-button>
      <paper-button readonly id="maxmeasure" value="{{measure}}">{{measure}}</paper-button>
      <paper-input id="actvalue" value="{{actualvalue}}" on-change="FnChange"></paper-input><paper-input readonly id="actualmeasure" value="{{measure}}"></paper-input>
      <paper-input id="{{name}}remarks" value="{{remarks}}" on-change="FnChange"></paper-input>
    </div>
  </template>
  <script>
  (function() {
    'use strict';
    var testarr=[];
    Polymer({
      is: 'specification-item-crd',
      ready:function(){
      this.flag=0;
      },
      FnSelected:function(e){
        this.minvalue = e.target.selectedItem.textContent.trim();
        this.actualvalue = e.target.selectedItem.textContent.trim();
      },
      FnChange:function(){     
      var obj={"inwardregno":"","containerid":"","name":"","minvalue":"","maxvalue":"","actualvalue":"","remarks":"","testdate":"","measure":""};
      obj.inwardregno=sessionStorage.getItem("sess_curr_inwardregno");
      obj.containerid=localStorage.getItem("curr_sess_expandedcontainer");
      obj.name=this.name;
      obj.minvalue=this.minvalue;
      obj.maxvalue=this.maxvalue;
      obj.actualvalue=this.actualvalue;
      obj.remarks=this.remarks;
      obj.measure=this.measure;
      var dat=new Date();
      obj.testdate=dat.getDate()+"/"+(dat.getMonth()+1)+"/"+dat.getFullYear();
//        alert(JSON.stringify(obj));
      for(var i=0;i<testarr.length;i++){
        if(testarr[i].name==obj.name){
          //alert('exists');
          this.flag=1;
          testarr[i].actualvalue=this.actualvalue;
          testarr[i].remarks=this.remarks;
        }
      }
      if(this.flag==0) {
        testarr.push(obj);
        document.querySelector('specification-card').FnSetValue(testarr);
      }
      },
      FnRemarkChange:function(){

      }
    });
  })();
  </script>
</dom-module>
